<section id="library" ng-class="{active:mctrl.ui.panel.isActive('library')}">
  <div>
    <button type="button" autosize mobile-click="mctrl.ui.scala.generateEDx()">generate</button>
    |
    divide the ratio (
      <input autosize class="center" type="number" min="1" step="1" ng-model="ui.scala.EDx.x.first" ng-focus="mctrl.ui.scala.generateEDxToEditor()" />
      :
      <input autosize class="center" type="number" min="1" step="1" ng-model="ui.scala.EDx.x.second" ng-focus="mctrl.ui.scala.generateEDxToEditor()" />
    ) into
    <input autosize class="center" type="number" min="1" step="1" ng-model="ui.scala.EDx.n" ng-focus="mctrl.ui.scala.generateEDxToEditor()" />
    equal parts
  </div>

  <hr />

  <h2>Popular scales</h2>

  <table>
    <tr ng-repeat="data in ui.scala.popular track by $index">
      <td ng-class="{even : $index % 2 === 1, odd : $index % 2 === 0}">
        <button autosize mobile-click="mctrl.ui.scala.loadURL(data.link)">{{data.name}}</button>
      </td>
    </tr>
  </table>

  <hr />
  
  <label class="labelled-button">
    <button type="button" class="icon-import" ng-class="{disabled:!ui.scala.importTextField.length}" mobile-click="mctrl.ui.scala.importSCL()"></button>
    Import to scale designer
  </label>

  <label class="labelled-button">
    <button type="button" class="icon-import" ng-class="{disabled:!ui.scala.importTextField.length}" mobile-click="mctrl.ui.scala.download()"></button>
    Download as scl file
  </label>

  <h2 class="success" ng-show="ui.scala.success === true">
    <i class="icon-good"></i> Scale successfully imported!
  </h2>

  <h2 class="fail" ng-show="ui.scala.success === false">
    {{e=ui.scala.error;''}}
    <div ng-show="e.atLine"><i class="icon-bad"></i> Parse error at line {{e.atLine}}!</div>
    <div ng-show="e.expected"><b>expected</b>: {{e.expected}}</div>
    <div ng-show="e.got"><b>got</b>: {{e.got}}</div>
  </h2>

  <div ui-codemirror="{onLoad: ui.scala.onEditorLoaded}" ui-codemirror-opts="ui.scala.editorOptions" ng-model="ui.scala.importTextField"></div>
</section>
